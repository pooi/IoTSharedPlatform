extends layout

block content

    link(href='/styles/quill.core.css', rel='stylesheet')
    link(href='/styles/quill.snow.css', rel='stylesheet')
    link(href='/styles/quill.bubble.css', rel='stylesheet')
    script(src='/scripts/quill.min.js')
    script(src='/scripts/vue-quill-editor.js')
    script.
        mxBasePath = '/scripts/src';
    script(src='/scripts/mxClient.js')

    script(src='/scripts/go.js')


    include toolbar


    v-content.brown.lighten-5.animation-fade-in(style="padding-top: 50px")
        //v-container.pa-0(:fluid="$vuetify.breakpoint.xsOnly || $vuetify.breakpoint.smOnly")
        v-container.pa-0()

            v-flex(md12='')
                //v-card.pa-3.safe-area-inset(:class="$vuetify.breakpoint.xsOnly || $vuetify.breakpoint.smOnly  ? 'elevation-0 mb-4 pt-4' : 'elevation-10 my-4'")
                v-card.safe-area-inset.elevation-0.mb-4(:class="$vuetify.breakpoint.xsOnly || $vuetify.breakpoint.smOnly  ? 'pt-3 pb-0 px-0' : 'pa-3'")

                    v-card-title.pb-0(style="margin-top: 20px;")
                        span.display-2(style="font-weight: 800;") 글 작성

                    v-card-text.py-0
                        v-divider.my-3

                    v-card-text
                        v-layout
                            v-flex(xs12)
                                v-card.pa-0.elevation-4
                                    v-card-text.py-2.mt-4
                                        span.headline.red--text.text--darken-1(style="font-weight: 700;") 설계도
                                        v-card.my-3.elevation-6(height="250px")
                                            v-layout(row, wrap, justify-center, align-center, style="width: 100%; height: 100%;")
                                                div#graph(style="width: 100%; height: 100%;")


                                    v-card-text.py-2.mt-4
                                        span.headline.red--text.text--darken-1(style="font-weight: 700;") 설계도
                                        v-card.my-3.elevation-6(height="250px")
                                            v-layout(row, wrap, justify-center, align-center, style="width: 100%; height: 100%;")
                                                div#myDiagramDiv(style="width: 100%; height: 100%;")
                                    v-card-actions
                                        v-btn(flat, @click="graphManager.save()") Save
                                        v-btn(flat, @click="graphManager.load()") Load




    include footer
    include bottom_tab

    script.
        var container = document.getElementById("graph");
        var model = new mxGraphModel();
        var graph = new mxGraph(container, model);
        console.log(graph);

        var vertexStyle = graph.getStylesheet().getDefaultVertexStyle();
        vertexStyle[mxConstants.STYLE_ROUNDED] = true;

        var edgeStyle = graph.getStylesheet().getDefaultEdgeStyle();
        edgeStyle[mxConstants.STYLE_EDGE] = mxEdgeStyle.TopToBottom;

        // Gets the default parent for inserting new cells. This
        // is normally the first child of the root (ie. layer 0).
        var parent = graph.getDefaultParent();

        // Adds cells to the model in a single step
        model.beginUpdate();
        try {
            var v1 = graph.insertVertex(parent, null, 'Hello, Hello, Hello, Hello, Hello, Hello,', 20, 20, 80, 30);
            var v2 = graph.insertVertex(parent, null, 'World!', 200, 150, 80, 30);
            var e1 = graph.insertEdge(parent, null, '', v1, v2);
        }
        finally {
            // Updates the display
            model.endUpdate();
        }

    script(type="text/javascript" src='/javascripts/graph-test-config.js')
    script.
        const vue = init('!{user}');